我们可以把式子$D_{i}=min(|P_{i}-P_{j}|+|i-j|),其中i\neq j$，中的绝对值拆掉。

例如当$j< i并且P_{j}>P_{i}$时,$D_{i}=min(P_{j}-P_{i}+i-j)$，现在就是求满足两个不等关系下的最小值问题了，可以循环$i$来控制第一个不等条件，第二个不等条件用数据结构来维护，例如线段树，树状数组等。